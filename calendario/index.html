<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendário</title>
    <link rel="icon" type="image/png" href="ico.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-4">
            <div class="h-8 mb-4"></div>
            <div class="flex items-center justify-center gap-4 mb-4">
                <button onclick="previousMonth()" class="bg-white hover:bg-gray-50 text-gray-700 px-4 py-2 rounded-lg shadow-md transition-all duration-200 font-medium">
                    ← Anterior
                </button>
                <h2 id="monthYear" class="text-2xl font-semibold text-gray-700 min-w-48 text-center"></h2>
                <button onclick="nextMonth()" class="bg-white hover:bg-gray-50 text-gray-700 px-4 py-2 rounded-lg shadow-md transition-all duration-200 font-medium">
                    Próximo →
                </button>
            </div>
        </div>

        <!-- Calendar Grid -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
            <!-- Days of week header -->
            <div class="grid grid-cols-7 bg-gradient-to-r from-indigo-600 to-blue-600">
                <div class="p-4 text-center font-semibold text-white">Dom</div>
                <div class="p-4 text-center font-semibold text-white">Seg</div>
                <div class="p-4 text-center font-semibold text-white">Ter</div>
                <div class="p-4 text-center font-semibold text-white">Qua</div>
                <div class="p-4 text-center font-semibold text-white">Qui</div>
                <div class="p-4 text-center font-semibold text-white">Sex</div>
                <div class="p-4 text-center font-semibold text-white">Sáb</div>
            </div>
            
            <!-- Calendar days -->
            <div id="calendarGrid" class="grid grid-cols-7 gap-0">
                <!-- Days will be generated by JavaScript -->
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="text-gray-600 text-center py-4 mt-8">
            <p class="text-sm cursor-pointer hover:text-indigo-600 transition-colors" onclick="window.open('https://instagram.com/perelequis', '_blank')">
                © <span id="currentYear"></span> Perelequis - Todos os direitos reservados
            </p>
        </footer>
    </div>

    <script>
        let currentDate = new Date();
        let eventsCache = {}; // Cache para armazenar eventos carregados

        const monthNames = [
            'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
            'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
        ];

        // ========================================
        // SISTEMA DE EVENTOS EXTERNOS
        // ========================================
        // 
        // COMO CRIAR OS ARQUIVOS DE EVENTOS:
        // 
        // 1. Crie arquivos separados para cada ano (de 2000 a 2050):
        //    - eventos2000.js, eventos2001.js, eventos2002.js...
        //    - eventos2024.js, eventos2025.js, eventos2026.js...
        //    - eventos2048.js, eventos2049.js, eventos2050.js
        //
        // 2. Cada arquivo deve conter APENAS o objeto JavaScript com os eventos:
        //
        // EXEMPLO COMPLETO do conteúdo do arquivo eventos2024.js:
        // {
        //     // ===== JANEIRO 2024 =====
        //     '2024-0-1': { title: 'Ano Novo', link: 'https://exemplo.com' },
        //     '2024-0-6': { title: 'Dia de Reis', link: '' },
        //     
        //     // EXEMPLO: TRÊS EVENTOS NO MESMO DIA (15 de Janeiro)
        //     '2024-0-15': [
        //         { title: 'Reunião 9h', link: 'https://meet.google.com' },
        //         { title: 'Almoço 12h', link: 'https://restaurante.com' },
        //         { title: 'Apresentação 15h', link: 'https://slides.com' }
        //     ],
        //     
        //     // ===== FEVEREIRO 2024 =====
        //     '2024-1-14': { title: 'Dia dos Namorados', link: '' },
        //     
        //     // EXEMPLO: DOIS EVENTOS NO MESMO DIA (20 de Fevereiro)
        //     '2024-1-20': [
        //         { title: 'Dentista 14h', link: '' },
        //         { title: 'Academia 18h', link: 'https://academia.com' }
        //     ],
        //     
        //     // ===== MARÇO 2024 =====
        //     '2024-2-8': { title: 'Dia da Mulher', link: 'https://diadamulher.com' },
        //     
        //     // EXEMPLO: TRÊS EVENTOS COMPLETOS (25 de Março)
        //     '2024-2-25': [
        //         { title: 'Café da manhã', link: 'https://cafe.com' },
        //         { title: 'Trabalho', link: '' },
        //         { title: 'Cinema 20h', link: 'https://cinema.com' }
        //     ]
        // }
        //
        // FORMATO DOS EVENTOS:
        // - Chave: 'ANO-MÊS-DIA' (mês começa em 0: Janeiro=0, Fevereiro=1, Março=2, etc.)
        // - Um evento: { title: 'Nome do Evento', link: 'URL opcional' }
        // - Múltiplos eventos: array com até 3 eventos no mesmo formato
        // - Link vazio: use '' (string vazia) se não tiver link
        //
        // CORES DOS EVENTOS:
        // - Hoje: sempre amarelo
        // - Futuro: amarelo
        // - Passado sem link: vermelho
        // - Passado com link: azul
        // ========================================

        async function loadEventsForYear(year) {
            if (eventsCache[year]) {
                return eventsCache[year];
            }

            try {
                const response = await fetch(`eventos${year}.js`);
                if (response.ok) {
                    const eventsText = await response.text();
                    // Avalia o conteúdo do arquivo como JavaScript
                    const events = eval(`(${eventsText})`);
                    eventsCache[year] = events;
                    return events;
                }
            } catch (error) {
                console.log(`Arquivo eventos${year}.js não encontrado ou erro ao carregar:`, error);
            }
            
            // Retorna objeto vazio se não conseguir carregar
            eventsCache[year] = {};
            return {};
        }

        async function generateCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Update month/year display
            document.getElementById('monthYear').textContent = `${monthNames[month]} ${year}`;
            
            // Carrega eventos do ano atual
            const events = await loadEventsForYear(year);
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'h-32 bg-gray-50 border border-gray-200';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'h-32 bg-white border border-gray-200 p-2 flex flex-col';
                
                const dayKey = `${year}-${month}-${day}`;
                const dayEvents = events[dayKey];
                
                let eventsHtml = '';
                
                if (dayEvents) {
                    const today = new Date();
                    const eventDate = new Date(year, month, day);
                    const isToday = eventDate.toDateString() === today.toDateString();
                    const isPast = eventDate < today && !isToday;
                    const isFuture = eventDate > today;
                    
                    // Se é um array de eventos (múltiplos eventos)
                    if (Array.isArray(dayEvents)) {
                        dayEvents.slice(0, 3).forEach(event => {
                            if (event.title) {
                                let colorClasses = '';
                                let hoverClasses = '';
                                let clickAction = '';
                                let titleText = '';
                                
                                // Lógica de cores baseada nas regras
                                if (isToday) {
                                    // Hoje: sempre amarelo
                                    colorClasses = 'bg-yellow-100 text-yellow-800';
                                    hoverClasses = 'hover:bg-yellow-200';
                                } else if (isFuture || !isPast) {
                                    // Futuro: amarelo
                                    colorClasses = 'bg-yellow-100 text-yellow-800';
                                    hoverClasses = 'hover:bg-yellow-200';
                                } else if (isPast && !event.link) {
                                    // Passado sem link: vermelho
                                    colorClasses = 'bg-red-100 text-red-800';
                                    hoverClasses = 'hover:bg-red-200';
                                } else {
                                    // Outros casos: azul padrão
                                    colorClasses = 'bg-indigo-100 text-indigo-800';
                                    hoverClasses = 'hover:bg-indigo-200';
                                }
                                
                                if (event.link) {
                                    clickAction = `onclick="openLink('${event.link}')"`;
                                    titleText = `title="Clique para abrir: ${event.link}"`;
                                    colorClasses += ' cursor-pointer';
                                }
                                
                                eventsHtml += `
                                    <div class="${colorClasses} px-2 py-1 rounded text-xs font-medium ${hoverClasses} transition-colors duration-200 mb-1" 
                                         ${clickAction} ${titleText}>
                                        ${event.title}
                                    </div>
                                `;
                            }
                        });
                    }
                    // Se é um evento único (formato antigo)
                    else if (dayEvents.title) {
                        let colorClasses = '';
                        let hoverClasses = '';
                        let clickAction = '';
                        let titleText = '';
                        
                        // Lógica de cores baseada nas regras
                        if (isToday) {
                            // Hoje: sempre amarelo
                            colorClasses = 'bg-yellow-100 text-yellow-800';
                            hoverClasses = 'hover:bg-yellow-200';
                        } else if (isFuture || !isPast) {
                            // Futuro: amarelo
                            colorClasses = 'bg-yellow-100 text-yellow-800';
                            hoverClasses = 'hover:bg-yellow-200';
                        } else if (isPast && !dayEvents.link) {
                            // Passado sem link: vermelho
                            colorClasses = 'bg-red-100 text-red-800';
                            hoverClasses = 'hover:bg-red-200';
                        } else {
                            // Outros casos: azul padrão
                            colorClasses = 'bg-indigo-100 text-indigo-800';
                            hoverClasses = 'hover:bg-indigo-200';
                        }
                        
                        if (dayEvents.link) {
                            clickAction = `onclick="openLink('${dayEvents.link}')"`;
                            titleText = `title="Clique para abrir: ${dayEvents.link}"`;
                            colorClasses += ' cursor-pointer';
                        }
                        
                        eventsHtml = `
                            <div class="${colorClasses} px-2 py-1 rounded text-xs font-medium ${hoverClasses} transition-colors duration-200" 
                                 ${clickAction} ${titleText}>
                                ${dayEvents.title}
                            </div>
                        `;
                    }
                }
                
                dayElement.innerHTML = `
                    <div class="font-semibold text-gray-700 mb-2">${day}</div>
                    <div class="flex-1 overflow-hidden">
                        ${eventsHtml}
                    </div>
                `;
                
                calendarGrid.appendChild(dayElement);
            }
        }

        function openLink(link) {
            if (link) {
                window.open(link, '_blank');
            }
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
        }

        // Initialize calendar
        generateCalendar();
        
        // Set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'972c8dfb349ca537',t:'MTc1NTgwNDcyOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
